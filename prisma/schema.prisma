// This block defines the Prisma Client generator.
// It tells Prisma to create the JavaScript client.
generator client {
  provider = "prisma-client-js"
}

// This block defines your database connection.
// ðŸ’¡ This configuration is optimized for Supabase/Serverless.
datasource db {
  provider = "postgresql"
  // 1. DATABASE_URL: Use the Supabase Transaction Pooler URL (for app runtime)
  url      = env("DATABASE_URL") 
  // 2. DIRECT_URL: Use the Supabase Direct Connection URL (for Prisma CLI commands)
  directUrl = env("DIRECT_URL")
}

// This is the model for your products table.
// This defines the structure of your data.
model Product {
  id              Int      @id @default(autoincrement())
  name            String
  url             String
  productId       String   @map("product_id")
  storeType       String   @map("store_type")
  createdAt       DateTime @default(now()) @map("created_at")
  partNumber      String?  @map("part_number")
  affiliateLink   String?  @map("affiliate_link") // Optional, for your link

  @@map("products")
}

// --- NEW: Model to cache licensing information for each client ---
model ClientLicense {
  // Use client_id as the unique identifier
  clientId        String   @id @map("client_id")
  licenseKey      String   @map("license_key")
  validUntil      DateTime @map("valid_until")
  
  @@map("licenses")
}